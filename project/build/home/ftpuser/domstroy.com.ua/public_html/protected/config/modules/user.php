<?php
return [
    'module' => [
        'class' => 'application.modules.user.UserModule',
        'panelWidgets' => [
            'application.modules.user.widgets.PanelUserStatWidget' => [
                'limit' => 5,
            ],
        ],
        'documentRoot' => $_SERVER['DOCUMENT_ROOT'],
        'avatarsDir' => 'avatars',
        'notifyEmailFrom' => 'test@test.ru',
    ],
    'import' => [
        'application.modules.user.UserModule',
        'application.modules.user.models.*',
        'application.modules.user.forms.*',
        'application.modules.user.components.*',
        'application.modules.company.*'
    ],
    'component' => [
        // компонент Yii::app()->user, подробнее http://www.yiiframework.ru/doc/guide/ru/topics.auth
        'user' => [
            'class' => 'application.modules.user.components.YWebUser',
            'loginUrl' => ['/user/account/login'],
            'identityCookie' => [
                'httpOnly' => true,
            ],
        ],
        'userManager' => [
            'class' => 'application.modules.user.components.UserManager',
            'hasher' => [
                'class' => 'application.modules.user.components.Hasher',
            ],
            'tokenStorage' => [
                'class' => 'application.modules.user.components.TokenStorage',
            ],
        ],
        'authenticationManager' => [
            'class' => 'application.modules.user.components.AuthenticationManager',
        ],
        'notify' => [
            'class' => 'yupe\components\Notify',
            'mail' => [
                'class' => 'yupe\components\Mail',
            ],
        ],
        'eventManager' => [
            'class' => 'yupe\components\EventManager',
            'events' => [
                'user.success.registration' => [
                    ['UserManagerListener', 'onUserRegistration'],
                ],
                'user.success.registration.need.activation' => [
                    ['UserManagerListener', 'onUserRegistrationNeedActivation'],
                ],
                'user.success.password.recovery' => [
                    ['UserManagerListener', 'onPasswordRecovery'],
                ],
                'user.success.activate.password' => [
                    ['UserManagerListener', 'onSuccessActivatePassword'],
                ],
                'user.success.email.confirm' => [
                    ['UserManagerListener', 'onSuccessEmailConfirm'],
                ],
                'user.success.email.change' => [
                    ['UserManagerListener', 'onSuccessEmailChange'],
                ],
            ],
        ],
    ],
    'rules' => [
        '/login' => 'user/account/login',
        '/logout' => 'user/account/logout',
        '/registration' => 'user/account/registration',
        '/recovery' => 'user/account/recovery',
        '/activate/<token>' => 'user/account/activate',
        '/confirm/<token>' => 'user/account/confirm',
        '/recovery/<token>' => 'user/account/restore',
        '/user/account/captcha/refresh/<v>' => 'user/account/captcha/refresh',
        '/user/account/captcha/<v>' => 'user/account/captcha/',
        '/users' => 'user/people/index',
        '/users/<username:\w+>/' => 'user/people/userInfo',
        '/profile' => 'user/profile/profile',
        '/profile/password' => 'user/profile/password',
        '/profile/email' => 'user/profile/email',
        '/forum-messages' => 'user/profile/forumMessages',
        '/user/company/' => 'user/company/view',
        '/user/company/index' => 'user/company/view',
        '/user/company/update/<id:\w+>/' => '/user/company/update',
        '/user/company/create/' => '/user/company/create',
        '/user/master/' => 'user/master/view',
        '/user/master/index' => 'user/master/view',
        '/user/master/update/<id:\w+>/' => '/user/master/update',
        '/user/master/create/' => '/user/master/create',
        '/user/buyer/' => 'user/buyer/view',
        '/user/buyer/index' => 'user/buyer/view',
        '/user/buyer/update/<id:\w+>/' => '/user/buyer/update',
        '/user/buyer/create/' => '/user/buyer/create',
        '/user/product/' => 'user/product/index',
        '/user/product/archive/' => 'user/product/archive',
        '/user/product/reprinting/' => 'user/product/reprinting',
        '/user/product/view/<id:\w+>/' => '/user/product/view',
        '/user/product/update/<id:\w+>/<page:\w*>/' => '/user/product/update',
        '/user/product/create' => 'user/product/create',
        '/user/product/delete/<id:\w+>/' => 'user/product/delete',
        '/user/product/publish/<id:\w+>/' => 'user/product/publish',
        '/user/product/dispublish/<id:\w+>/' => 'user/product/dispublish',
        '/user/product/republish/<id:\w+>/<page:\w*>/' => 'user/product/republish',
        '/user/product/masspublish/' => 'user/product/masspublish',
        '/user/product/massdispublish/' => 'user/product/massdispublish',
        '/user/product/masssettop/' => 'user/product/masssettop',
        '/user/product/massdelete/' => 'user/product/massdelete',
        '/user/product/getslugunikum/' => 'user/product/getslugunikum',
        '/user/product/copy' => 'user/product/copy',
        '/user/service/' => 'user/service/index',
        '/user/service/archive/' => 'user/service/archive',
        '/user/service/view/<id:\w+>/' => '/user/service/view',
        '/user/service/update/<id:\w+>/' => '/user/service/update',
        '/user/service/create' => 'user/service/create',
        '/user/service/delete/<id:\w+>/' => 'user/service/delete',
        '/user/service/copy' => 'user/service/copy',
        '/user/service/settop' => 'user/service/settop',
        '/user/product/settop' => 'user/product/settop',
        '/cabinet' => 'user/cabinet/index',
        '/cabinet/operations' => 'user/cabinet/balanceadmin',
        '/cabinet/top' => 'user/cabinet/top',
        '/cabinet/plan' => 'user/cabinet/plan',
        '/user/product/updateajax/<id:\w+>/' => 'user/product/updateajax',
        '/user/product/updateajax2/<id:\w+>/<product_id:\w*>/' => 'user/product/updateajax2',
        '/user/product/categoryajax/<sup_type:\w+>/<product_id:\w*>/' => 'user/product/categoryajax',
        '/user/product/measurementsajax/<sup_type:\w+>/<product_id:\w*>/' => 'user/product/measurementsajax',
        '/user/product/getproductsforexport/<category_id:\d+>/' => 'user/product/getproductsforexport',
        '/user/product/getmagorcategory/<sup_type:\w*>' => '/user/product/getmagorcategory',
        '/user/product/getcategory/<sup_type:\w*>' => '/user/product/getcategory',
        '/user/product/getedinicy/<sup_type:\w*>' => '/user/product/getedinicy',
        'user/product/getcatsearch/<sup_type:\w*>' => 'user/product/getcatsearch',
        'user/product/xmlkatalog/<company_id:\w+>' => 'user/product/xmlkatalog',
        '/user/product/getshabloncategory/<id_category:\w*>' => '/user/product/getshabloncategory',
        '/user/product/getattributecategory/<id_category:\w*>' => '/user/product/getattributecategory',
        '/user/product/export/' => 'user/product/export',
        '/user/product/import/' => 'user/product/import',
        '/user/product/importxls/' => 'user/product/importxls',
        'user/product/test'  => 'user/product/test',
        '/user/product/ymldownload/' => 'user/product/ymldownload',
        '/user/product/importyml/' => 'user/product/importyml',
        '/user/product/formenegeryml/' => 'user/product/formenegeryml',
        '/user/product/smenayml/' => 'user/product/smenayml',
        '/user/product/settingsyml/' => 'user/product/settingsyml',
        '/user/service/export/' => 'user/service/export',
        '/user/product/massexport/' => 'user/product/massexport',
        '/user/product/templatexls/' => 'user/product/templatexls',
        '/user/service/import/' => 'user/service/import',
        '/user/product/massimport/' => 'user/product/massimport',
        '/user/service/importxls/' => 'user/service/importxls',
        '/user/currency/' => 'user/currency',
        '/user/currency/create/' => 'user/currency/create',
        '/user/currency/update/<id:\w+>/' => 'user/currency/update',
        '/user/currency/delete/<id:\w+>/' => 'user/currency/delete',
        '/user/statistics' => 'user/statistics/index',
        '/user/statistics/viber' => 'user/statistics/viber',
        '/user/statistics/callback' => 'user/statistics/callback',
        '/user/statistics/getdatagraphic/<arr_data>' => 'user/statistics/getdatagraphic',
        '/user/product/metatagedit/' => 'user/product/metatagedit',
        // '/user/statistics/hits' => 'user/statistics/hits',
    ],
];
